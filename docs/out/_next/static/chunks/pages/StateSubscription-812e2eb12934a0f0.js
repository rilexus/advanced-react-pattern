(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8430],{3150:function(t,n,e){"use strict";function r(t,n){return r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},r(t,n)}e.r(n),e.d(n,{default:function(){return g}});var o=e(4027);function i(t,n){if(n&&("object"===o(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,n,e){return n&&c(t.prototype,n),e&&c(t,e),t}var a=e(9499),f=e(7294),d=e(3236),b=e(5),h=e(5893);function p(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)}}var v=new(function(t){!function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}(e,t);var n=p(e);function e(){return u(this,e),n.call(this,0)}return l(e,[{key:"add",value:function(t){this.setState(this.getState()+t)}}]),e}(function(){function t(n){u(this,t),(0,a.Z)(this,"subscribers",[]),this.state=n}return l(t,[{key:"subscribe",value:function(t){"function"===typeof t&&this.subscribers.push(t)}},{key:"unsubscribe",value:function(t){this.subscribers=this.subscribers.filter((function(n){return n!==t}))}},{key:"notify",value:function(){var t=this;this.subscribers.forEach((function(n){n(t.state)}))}},{key:"setState",value:function(t){this.state=t,this.notify()}},{key:"getState",value:function(){return this.state}}]),t}())),C=function(){var t=v.getState(),n=(0,f.useState)(!0)[1];return(0,f.useEffect)((function(){var t=function(){n((function(t){return!t}))};return v.subscribe(t),function(){v.unsubscribe(t)}}),[]),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:t}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:function(){return v.add(1)},children:"Add"})})]})},g=function(){return(0,h.jsxs)(b.Z,{children:[(0,h.jsx)("h1",{children:"State Subscription"}),(0,h.jsx)(C,{}),(0,h.jsx)(d.E,{children:"const Component = () => {\n  const count = controller.getState();\n  const [, setFlag] = useState(true);\n\n  useEffect(() => {\n    const handler = () => {\n      setFlag((toggle) => !toggle);\n    };\n    controller.subscribe(handler);\n    return () => {\n      controller.unsubscribe(handler);\n    };\n  }, []);\n  return (\n    <div>\n      <div>{count}</div>\n      <div>\n        <button onClick={() => controller.add(1)}>Add</button>\n      </div>\n    </div>\n  );\n};"}),(0,h.jsx)(d.E,{children:'class State {\n  subscribers = [];\n  constructor(state) {\n    this.state = state;\n  }\n\n  subscribe(subscriber) {\n    if (typeof subscriber !== "function") return;\n    this.subscribers.push(subscriber);\n  }\n\n  unsubscribe(subscriber) {\n    this.subscribers = this.subscribers.filter((s) => s !== subscriber);\n  }\n\n  notify() {\n    this.subscribers.forEach((subscriber) => {\n      subscriber(this.state);\n    });\n  }\n\n  setState(newState) {\n    this.state = newState;\n    this.notify();\n  }\n\n  getState() {\n    return this.state;\n  }\n}\n\n\n\nclass Controller extends State {\n  constructor() {\n    super(0);\n  }\n\n  add(value) {\n    this.setState(this.getState() + value);\n  }\n}'}),(0,h.jsx)(d.E,{children:"const useCount = () => {\n  const count = controller.getState();\n  const [, setFlag] = useState(true);\n\n  useEffect(() => {\n    const handler = () => {\n      setFlag((toggle) => !toggle);\n    };\n    controller.subscribe(handler);\n    return () => {\n      controller.unsubscribe(handler);\n    };\n  }, []);\n  \n  return [count, controller.add];\n}"}),(0,h.jsx)(d.E,{children:"const Component = () => {\n  const [count, add] = useCount();\n  \n  return (\n    <div>\n      <div>{count}</div>\n      <div>\n        <button onClick={() => add(1)}>Add</button>\n      </div>\n    </div>\n  );\n};"})]})}},3676:function(t,n,e){"use strict";e(7294);var r=e(939),o=e(5893),i={lineNumberColor:"#333333",lineNumberBgColor:"white",backgroundColor:"#f3f3f3",textColor:"#25282a",substringColor:"#6A8759",keywordColor:"#c95464",attributeColor:"#c95464",selectorAttributeColor:"#a71d5d",docTagColor:"#333333",nameColor:"#63a35c",builtInColor:"#333333",literalColor:"#0086b3",bulletColor:"#0086b3",codeColor:"#333333",additionColor:"#55a532",regexpColor:"#333333",symbolColor:"#0086b3",variableColor:"#df5000",templateVariableColor:"#df5000",linkColor:"#0366d6",selectorClassColor:"#795da3",typeColor:"#a71d5d",stringColor:"#6eb240",selectorIdColor:"#795da3",quoteColor:"#df5000",templateTagColor:"#a88609",deletionColor:"#bd2c00",titleColor:"#795da3",sectionColor:"#a88609",commentColor:"#969896",metaKeywordColor:"#333333",metaColor:"#969896",functionColor:"#675c98",numberColor:"#6897BB"};n.Z=function(t){var n=t.children;return(0,o.jsx)("div",{style:{margin:"1rem 0",fontSize:".9rem"},children:(0,o.jsx)(r.dn,{text:n,language:"jsx",showLineNumbers:!1,theme:i})})}},3236:function(t,n,e){"use strict";e.d(n,{E:function(){return r.Z}});var r=e(3676)},5:function(t,n,e){"use strict";e(7294);var r=e(2125),o=e(5893),i=r.ZP.div.withConfig({displayName:"Container__Styled",componentId:"sc-zkefve-0"})(["margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px;width:100%;@media screen and (max-width:575px){min-width:97vw;}@media screen and (min-width:576px){max-width:1024px;}"]);n.Z=function(t){var n=t.children;return(0,o.jsx)(i,{children:n})}},7633:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/StateSubscription",function(){return e(3150)}])}},function(t){t.O(0,[939,9774,2888,179],(function(){return n=7633,t(t.s=n);var n}));var n=t.O();_N_E=n}]);