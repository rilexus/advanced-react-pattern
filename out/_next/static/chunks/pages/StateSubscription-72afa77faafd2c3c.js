(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{63296:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});t(67294);var r=t(90005),o=t(85893),i=function(e){var n=e.children,t=e.direction,r=void 0===t?"row":t;return(0,o.jsx)("div",{style:{display:"flex",flexDirection:r},children:n})},c=function(e){var n=e.navigation,t=e.content;return(0,o.jsx)(r.Z,{children:(0,o.jsxs)(i,{children:[(0,o.jsx)("div",{style:{marginRight:"1rem"},children:n}),(0,o.jsx)("div",{children:t})]})})}},7712:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35830),o=t(41664),i=t.n(o),c=(t(67294),t(32125)),s=t(85893),u=c.ZP.li.withConfig({displayName:"Li__Styled",componentId:"sc-2pbekf-0"})(["white-space:nowrap;line-height:1.5;"]),l=function(e){var n=e.children;return(0,s.jsx)(u,{children:n})},a=function(){return(0,s.jsx)("nav",{children:(0,s.jsxs)(r.Ul,{children:[(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/",children:"Home"})}),(0,s.jsxs)(l,{children:[(0,s.jsx)("h4",{children:"Utils"}),(0,s.jsxs)(r.Ul,{children:[(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/Prefetch",children:(0,s.jsx)("a",{children:"Prefetched State"})})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/StateSubscription",children:"State Subscription"})})]})]}),(0,s.jsxs)(l,{children:[(0,s.jsx)("h4",{children:"Components"}),(0,s.jsxs)(r.Ul,{children:[(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/suspense",children:"Suspense"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/CompoundToggle",children:"Compound Components"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/StateReducer",children:"State Reducer"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/PropCollection",children:"Props Collection"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/RenderPropsToggle",children:"Render Props"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/Factory",children:"Factory"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/ControlProps",children:"Control Props"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/Decorator",children:"Decorator"})})]})]}),(0,s.jsxs)(l,{children:[(0,s.jsx)("h4",{children:"Hooks"}),(0,s.jsxs)(r.Ul,{children:[(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/ReducerHook",children:"Reducer Hook"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/UndoState",children:"Undo State"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/ThunkReducer",children:"Thunk Reducer"})}),(0,s.jsx)(l,{children:(0,s.jsx)(i(),{href:"/FetchHook",children:"Fetch Hook"})})]})]})]})})}},77913:function(e,n,t){"use strict";var r=t(85696);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=t(67294))&&o.__esModule?o:{default:o},c=t(12199),s=t(61587),u=t(27215);function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var a={};function f(e,n,t,r){if(e&&c.isLocalURL(n)){e.prefetch(n,t,r).catch((function(e){0}));var o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;a[n+"%"+t+(o?"%"+o:"")]=!0}}var d=i.default.forwardRef((function(e,n){var t,o=e.legacyBehavior,d=void 0===o?!0!==Boolean(!1):o,h=e.href,p=e.as,b=e.children,v=e.prefetch,j=e.passHref,y=e.replace,x=e.shallow,g=e.scroll,m=e.locale,w=e.onClick,O=e.onMouseEnter,S=l(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter"]);t=b,d&&"string"===typeof t&&(t=i.default.createElement("a",null,t));var E,k=!1!==v,C=s.useRouter(),P=i.default.useMemo((function(){var e=c.resolveHref(C,h,!0),n=r(e,2),t=n[0],o=n[1];return{href:t,as:p?c.resolveHref(C,p):o||t}}),[C,h,p]),_=P.href,R=P.as,Z=i.default.useRef(_),L=i.default.useRef(R);d&&(E=i.default.Children.only(t));var M=d?E&&"object"===typeof E&&E.ref:n,U=u.useIntersection({rootMargin:"200px"}),D=r(U,3),I=D[0],T=D[1],H=D[2],N=i.default.useCallback((function(e){L.current===R&&Z.current===_||(H(),L.current=R,Z.current=_),I(e),M&&("function"===typeof M?M(e):"object"===typeof M&&(M.current=e))}),[R,M,_,H,I]);i.default.useEffect((function(){var e=T&&k&&c.isLocalURL(_),n="undefined"!==typeof m?m:C&&C.locale,t=a[_+"%"+R+(n?"%"+n:"")];e&&!t&&f(C,_,R,{locale:n})}),[R,_,T,m,k,C]);var F={ref:N,onClick:function(e){d||"function"!==typeof w||w(e),d&&E.props&&"function"===typeof E.props.onClick&&E.props.onClick(e),e.defaultPrevented||function(e,n,t,r,o,i,s,u){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&c.isLocalURL(t))&&(e.preventDefault(),n[o?"replace":"push"](t,r,{shallow:i,locale:u,scroll:s}))}(e,C,_,R,y,x,g,m)},onMouseEnter:function(e){d||"function"!==typeof O||O(e),d&&E.props&&"function"===typeof E.props.onMouseEnter&&E.props.onMouseEnter(e),c.isLocalURL(_)&&f(C,_,R,{priority:!0})}};if(!d||j||"a"===E.type&&!("href"in E.props)){var B="undefined"!==typeof m?m:C&&C.locale,A=C&&C.isLocaleDomain&&c.getDomainLocale(R,B,C&&C.locales,C&&C.domainLocales);F.href=A||c.addBasePath(c.addLocale(R,B,C&&C.defaultLocale))}return d?i.default.cloneElement(E,F):i.default.createElement("a",Object.assign({},S,F),t)}));n.default=d,("function"===typeof n.default||"object"===typeof n.default&&null!==n.default)&&(Object.assign(n.default,n),e.exports=n.default)},27215:function(e,n,t){"use strict";var r=t(85696);Object.defineProperty(n,"__esModule",{value:!0}),n.useIntersection=function(e){var n=e.rootRef,t=e.rootMargin,l=e.disabled||!c,a=o.useRef(),f=o.useState(!1),d=r(f,2),h=d[0],p=d[1],b=o.useState(n?n.current:null),v=r(b,2),j=v[0],y=v[1],x=o.useCallback((function(e){a.current&&(a.current(),a.current=void 0),l||h||e&&e.tagName&&(a.current=function(e,n,t){var r=function(e){var n,t={root:e.root||null,margin:e.rootMargin||""},r=u.find((function(e){return e.root===t.root&&e.margin===t.margin}));r?n=s.get(r):(n=s.get(t),u.push(t));if(n)return n;var o=new Map,i=new IntersectionObserver((function(e){e.forEach((function(e){var n=o.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return s.set(t,n={id:t,observer:i,elements:o}),n}(t),o=r.id,i=r.observer,c=r.elements;return c.set(e,n),i.observe(e),function(){if(c.delete(e),i.unobserve(e),0===c.size){i.disconnect(),s.delete(o);var n=u.findIndex((function(e){return e.root===o.root&&e.margin===o.margin}));n>-1&&u.splice(n,1)}}}(e,(function(e){return e&&p(e)}),{root:j,rootMargin:t}))}),[l,j,t,h]),g=o.useCallback((function(){p(!1)}),[]);return o.useEffect((function(){if(!c&&!h){var e=i.requestIdleCallback((function(){return p(!0)}));return function(){return i.cancelIdleCallback(e)}}}),[h]),o.useEffect((function(){n&&y(n.current)}),[n]),[x,h,g]};var o=t(67294),i=t(98065),c="undefined"!==typeof IntersectionObserver;var s=new Map,u=[];("function"===typeof n.default||"object"===typeof n.default&&null!==n.default)&&(Object.assign(n.default,n),e.exports=n.default)},22314:function(e,n,t){"use strict";t.r(n);var r=t(45959),o=t(72179),i=t(37247),c=t(92777),s=t(82262),u=t(59499),l=t(67294),a=t(43236),f=(t(90005),t(63296)),d=t(7712),h=t(85893);function p(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,i.Z)(e);if(n){var c=(0,i.Z)(this).constructor;t=Reflect.construct(r,arguments,c)}else t=r.apply(this,arguments);return(0,o.Z)(this,t)}}var b=new(function(e){(0,r.Z)(t,e);var n=p(t);function t(){return(0,c.Z)(this,t),n.call(this,0)}return(0,s.Z)(t,[{key:"add",value:function(e){this.setState(this.getState()+e)}}]),t}(function(){function e(n){(0,c.Z)(this,e),(0,u.Z)(this,"subscribers",[]),this.state=n}return(0,s.Z)(e,[{key:"subscribe",value:function(e){"function"===typeof e&&this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(n){return n!==e}))}},{key:"notify",value:function(){var e=this;this.subscribers.forEach((function(n){n(e.state)}))}},{key:"setState",value:function(e){this.state=e,this.notify()}},{key:"getState",value:function(){return this.state}}]),e}())),v=function(){var e=b.getState(),n=(0,l.useState)(!0)[1];return(0,l.useEffect)((function(){var e=function(){n((function(e){return!e}))};return b.subscribe(e),function(){b.unsubscribe(e)}}),[]),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:e}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:function(){return b.add(1)},children:"Add"})})]})};n.default=function(){return(0,h.jsx)(f.Z,{navigation:(0,h.jsx)(d.Z,{}),content:(0,h.jsx)("div",{children:(0,h.jsx)("main",{children:(0,h.jsxs)("article",{children:[(0,h.jsx)("h1",{children:"State Subscription"}),(0,h.jsx)(v,{}),(0,h.jsx)(a.E,{children:"const Component = () => {\n  const count = controller.getState();\n  const [, setFlag] = useState(true);\n\n  useEffect(() => {\n    const handler = () => {\n      setFlag((toggle) => !toggle);\n    };\n    controller.subscribe(handler);\n    return () => {\n      controller.unsubscribe(handler);\n    };\n  }, []);\n  return (\n    <div>\n      <div>{count}</div>\n      <div>\n        <button onClick={() => controller.add(1)}>Add</button>\n      </div>\n    </div>\n  );\n};"}),(0,h.jsx)(a.E,{children:'class State {\n  subscribers = [];\n  constructor(state) {\n    this.state = state;\n  }\n\n  subscribe(subscriber) {\n    if (typeof subscriber !== "function") return;\n    this.subscribers.push(subscriber);\n  }\n\n  unsubscribe(subscriber) {\n    this.subscribers = this.subscribers.filter((s) => s !== subscriber);\n  }\n\n  notify() {\n    this.subscribers.forEach((subscriber) => {\n      subscriber(this.state);\n    });\n  }\n\n  setState(newState) {\n    this.state = newState;\n    this.notify();\n  }\n\n  getState() {\n    return this.state;\n  }\n}\n\n\n\nclass Controller extends State {\n  constructor() {\n    super(0);\n  }\n\n  add(value) {\n    this.setState(this.getState() + value);\n  }\n}'}),(0,h.jsx)(a.E,{children:"const useCount = () => {\n  const count = controller.getState();\n  const [, setFlag] = useState(true);\n\n  useEffect(() => {\n    const handler = () => {\n      setFlag((toggle) => !toggle);\n    };\n    controller.subscribe(handler);\n    return () => {\n      controller.unsubscribe(handler);\n    };\n  }, []);\n  \n  return [count, controller.add];\n}"}),(0,h.jsx)(a.E,{children:"const Component = () => {\n  const [count, add] = useCount();\n  \n  return (\n    <div>\n      <div>{count}</div>\n      <div>\n        <button onClick={() => add(1)}>Add</button>\n      </div>\n    </div>\n  );\n};"})]})})})})}},43236:function(e,n,t){"use strict";t.d(n,{E:function(){return r.Z}});var r=t(92240)},90005:function(e,n,t){"use strict";t(67294);var r=t(32125),o=t(85893),i=r.ZP.div.withConfig({displayName:"Container__Styled",componentId:"sc-zkefve-0"})(["margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px;width:100%;@media screen and (max-width:575px){min-width:97vw;}@media screen and (min-width:576px){max-width:1024px;}"]);n.Z=function(e){var n=e.children;return(0,o.jsx)(i,{children:n})}},35830:function(e,n,t){"use strict";t.d(n,{Ul:function(){return s}});var r=t(59499),o=(t(67294),t(85893));function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var s=function(e){return(0,o.jsx)("ul",c({style:c({paddingLeft:"1rem"},e.style)},e))}},27633:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/StateSubscription",function(){return t(22314)}])},41664:function(e,n,t){e.exports=t(77913)},92777:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return r}})},82262:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}t.d(n,{Z:function(){return o}})},37247:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},45959:function(e,n,t){"use strict";function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}t.d(n,{Z:function(){return o}})},72179:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(14027);function o(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}}},function(e){e.O(0,[774,888,179],(function(){return n=27633,e(e.s=n);var n}));var n=e.O();_N_E=n}]);