<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/advanced-react-pattern/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/advanced-react-pattern/_next/static/chunks/webpack-79bfb6a7cdfac8de.js" defer=""></script><script src="/advanced-react-pattern/_next/static/chunks/framework-0ba0ddd33199226d.js" defer=""></script><script src="/advanced-react-pattern/_next/static/chunks/main-c82185d11959f538.js" defer=""></script><script src="/advanced-react-pattern/_next/static/chunks/pages/_app-ed76948c8b6fd9ce.js" defer=""></script><script src="/advanced-react-pattern/_next/static/chunks/pages/StateReducer-fc812cd0a96347c8.js" defer=""></script><script src="/advanced-react-pattern/_next/static/C8ktgNYOo0vRgkcGtOktL/_buildManifest.js" defer=""></script><script src="/advanced-react-pattern/_next/static/C8ktgNYOo0vRgkcGtOktL/_ssgManifest.js" defer=""></script><script src="/advanced-react-pattern/_next/static/C8ktgNYOo0vRgkcGtOktL/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.QPxGF{margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px;width:100%;max-width:992px;}/*!sc*/
@media (min-width:576px){.QPxGF{width:99vw;}}/*!sc*/
@media (min-width:768px){.QPxGF{width:90vw;}}/*!sc*/
@media (min-width:992px){.QPxGF{width:70vw;}}/*!sc*/
@media (min-width:1200px){.QPxGF{width:40vw;}}/*!sc*/
data-styled.g1[id="Container__Styled-sc-zkefve-0"]{content:"QPxGF,"}/*!sc*/
.gpnAYg{height:100vh;background:rgba(255,255,255,0.76);top:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);left:0;padding-left:2rem;-webkit-transition:-webkit-transform 200ms;-webkit-transition:transform 200ms;transition:transform 200ms;width:300px;position:fixed;}/*!sc*/
data-styled.g2[id="Layout__StyledSidebar-sc-1tqca63-0"]{content:"gpnAYg,"}/*!sc*/
.fnJOng{white-space:nowrap;line-height:1.5;padding-bottom:0.4rem;}/*!sc*/
data-styled.g3[id="Li__Styled-sc-2pbekf-0"]{content:"fnJOng,"}/*!sc*/
.hWeMkM{cursor:pointer;font-size:1.1rem;-webkit-text-decoration:none;text-decoration:none;color:blue;position:relative;}/*!sc*/
.hWeMkM:hover:after{-webkit-transform:translateX(1rem) translateY(-50%) rotate(-45deg);-ms-transform:translateX(1rem) translateY(-50%) rotate(-45deg);transform:translateX(1rem) translateY(-50%) rotate(-45deg);opacity:1;}/*!sc*/
.hWeMkM:after{content:" ";width:0.5rem;height:0.5rem;opacity:0;position:absolute;-webkit-transform:translateY(-50%) rotate(-45deg);-ms-transform:translateY(-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg);-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transition:-webkit-transform 200ms,opacity 200ms;-webkit-transition:transform 200ms,opacity 200ms;transition:transform 200ms,opacity 200ms;right:0;top:50%;border-right:2px solid blue;border-bottom:2px solid blue;}/*!sc*/
data-styled.g4[id="Link__StyledLink-sc-wozd19-0"]{content:"hWeMkM,"}/*!sc*/
.QgnfO figure{margin:0;}/*!sc*/
.QgnfO .hljs{background:#f6f6f6;color:black;border-radius:0.5rem;padding:2rem 1rem 2rem 2rem;font-size:0.95rem;line-height:1.25;}/*!sc*/
.QgnfO .xml .hljs-meta{color:#c0c0c0;}/*!sc*/
.QgnfO .hljs-comment,.QgnfO .hljs-quote{color:#007400;}/*!sc*/
.QgnfO .hljs-tag,.QgnfO .hljs-attribute,.QgnfO .hljs-keyword,.QgnfO .hljs-selector-tag,.QgnfO .hljs-literal,.QgnfO .hljs-name{color:#aa0d91;}/*!sc*/
.QgnfO .hljs-variable,.QgnfO .hljs-template-variable{color:#3f6e74;}/*!sc*/
.QgnfO .hljs-code,.QgnfO .hljs-string,.QgnfO .hljs-meta .hljs-string{color:#c41a16;}/*!sc*/
.QgnfO .hljs-regexp,.QgnfO .hljs-link{color:#0e0eff;}/*!sc*/
.QgnfO .hljs-title,.QgnfO .hljs-symbol,.QgnfO .hljs-bullet,.QgnfO .hljs-number{color:#1c00cf;}/*!sc*/
.QgnfO .hljs-section,.QgnfO .hljs-meta{color:#643820;}/*!sc*/
.QgnfO .hljs-title.class_,.QgnfO .hljs-class .hljs-title,.QgnfO .hljs-type,.QgnfO .hljs-built_in,.QgnfO .hljs-params{color:#5c2699;}/*!sc*/
.QgnfO .hljs-attr{color:#836c28;}/*!sc*/
.QgnfO .hljs-subst{color:#000;}/*!sc*/
.QgnfO .hljs-formula{background-color:#eee;font-style:italic;}/*!sc*/
.QgnfO .hljs-addition{background-color:#baeeba;}/*!sc*/
.QgnfO .hljs-deletion{background-color:#ffc8bd;}/*!sc*/
.QgnfO .hljs-selector-id,.QgnfO .hljs-selector-class{color:#9b703f;}/*!sc*/
.QgnfO .hljs-doctag,.QgnfO .hljs-strong{font-weight:bold;}/*!sc*/
.QgnfO .hljs-emphasis{font-style:italic;}/*!sc*/
data-styled.g5[id="Code__CodeTheme-sc-1i7zmjv-0"]{content:"QgnfO,"}/*!sc*/
.fwqmoU{margin-top:44px;margin-bottom:44px;overflow-x:scroll;}/*!sc*/
data-styled.g6[id="Code__StyledPre-sc-1i7zmjv-1"]{content:"fwqmoU,"}/*!sc*/
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}/*!sc*/
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;margin:0;padding:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
data-styled.g7[id="sc-global-jbFqTx1"]{content:"sc-global-jbFqTx1,"}/*!sc*/
</style></head><body><div id="__next"><div><div class="Container__Styled-sc-zkefve-0 QPxGF"><div><div><main><article><h1>State Reducer</h1><div><div><div>Count: <!-- -->0<!-- --> (max. 5)</div><div><button>Off</button></div></div></div><div><div style="position:relative" class="Code__CodeTheme-sc-1i7zmjv-0 QgnfO"><button style="position:absolute;right:0;border:none;cursor:pointer;margin:.5rem;background:transparent"><svg stroke="black" fill="black" stroke-width="0" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 30 30" height="1.3rem" width="1.3rem" xmlns="http://www.w3.org/2000/svg"><path d="M3.74,14.44c0-1.52,0.3-2.98,0.89-4.37s1.4-2.58,2.4-3.59s2.2-1.81,3.59-2.4s2.84-0.89,4.37-0.89s2.98,0.3,4.37,0.89 s2.59,1.4,3.6,2.4s1.81,2.2,2.4,3.59s0.89,2.84,0.89,4.37s-0.3,2.98-0.89,4.37s-1.4,2.59-2.4,3.6s-2.2,1.81-3.6,2.4 s-2.85,0.89-4.37,0.89s-2.98-0.3-4.37-0.89s-2.58-1.4-3.59-2.4s-1.81-2.2-2.4-3.6S3.74,15.97,3.74,14.44z M4.94,14.44 c0,1.37,0.27,2.67,0.8,3.91s1.25,2.31,2.15,3.21s1.97,1.61,3.21,2.15s2.54,0.8,3.9,0.8h0.21V4.39h-0.21c-1.36,0-2.66,0.27-3.9,0.8 S8.79,6.44,7.89,7.34s-1.61,1.97-2.15,3.21S4.94,13.09,4.94,14.44z"></path></svg></button><div itemscope="" itemType="https://schema.org/SoftwareSourceCode"><div itemProp="audience" itemscope="" itemtype="https://schema.org/Audience"><meta itemProp="audienceType" content="programmers"/></div><meta itemProp="codeSampleType" content="code snippet"/><meta itemProp="codeRepository" content="https://github.com/rilexus/advanced-react-pattern"/><div itemProp="maintainer" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><div itemProp="author" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><meta itemProp="programmingLanguage" content="javascript"/><pre class="Code__StyledPre-sc-1i7zmjv-1 fwqmoU">const Component = () =&gt; {
  const [count, setCount] = useState(0);

  const reduceState = (state, changes) =&gt; {
    if (count === 5) {
      return state;
    }
    setCount((c) =&gt; c + 1);
    return { ...state, ...changes };
  };

  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count} (max. 5)&lt;/div&gt;
      &lt;Toggle reduceState={reduceState}&gt;&lt;/Toggle&gt;
    &lt;/div&gt;
  );
};</pre></div></div><div style="position:relative" class="Code__CodeTheme-sc-1i7zmjv-0 QgnfO"><button style="position:absolute;right:0;border:none;cursor:pointer;margin:.5rem;background:transparent"><svg stroke="black" fill="black" stroke-width="0" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 30 30" height="1.3rem" width="1.3rem" xmlns="http://www.w3.org/2000/svg"><path d="M3.74,14.44c0-1.52,0.3-2.98,0.89-4.37s1.4-2.58,2.4-3.59s2.2-1.81,3.59-2.4s2.84-0.89,4.37-0.89s2.98,0.3,4.37,0.89 s2.59,1.4,3.6,2.4s1.81,2.2,2.4,3.59s0.89,2.84,0.89,4.37s-0.3,2.98-0.89,4.37s-1.4,2.59-2.4,3.6s-2.2,1.81-3.6,2.4 s-2.85,0.89-4.37,0.89s-2.98-0.3-4.37-0.89s-2.58-1.4-3.59-2.4s-1.81-2.2-2.4-3.6S3.74,15.97,3.74,14.44z M4.94,14.44 c0,1.37,0.27,2.67,0.8,3.91s1.25,2.31,2.15,3.21s1.97,1.61,3.21,2.15s2.54,0.8,3.9,0.8h0.21V4.39h-0.21c-1.36,0-2.66,0.27-3.9,0.8 S8.79,6.44,7.89,7.34s-1.61,1.97-2.15,3.21S4.94,13.09,4.94,14.44z"></path></svg></button><div itemscope="" itemType="https://schema.org/SoftwareSourceCode"><div itemProp="audience" itemscope="" itemtype="https://schema.org/Audience"><meta itemProp="audienceType" content="programmers"/></div><meta itemProp="codeSampleType" content="code snippet"/><meta itemProp="codeRepository" content="https://github.com/rilexus/advanced-react-pattern"/><div itemProp="maintainer" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><div itemProp="author" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><meta itemProp="programmingLanguage" content="javascript"/><pre class="Code__StyledPre-sc-1i7zmjv-1 fwqmoU">const Toggle = ({ reduceState }) =&gt; {
  const [state, setState] = useState({ on: false });

  const setToState = (changes) =&gt; {
    setState((oldState) =&gt; {
      if (!reduceState) {
        return { ...oldState, ...changes };
      }

      return reduceState(oldState, changes);
    });
  };

  const handleClick = () =&gt; setToState({ on: !state.on });

  return (
    &lt;div&gt;
      &lt;button onClick={handleClick}&gt;{state.on ? &quot;On&quot; : &quot;Off&quot;}&lt;/button&gt;
    &lt;/div&gt;
  );
};</pre></div></div><div style="position:relative" class="Code__CodeTheme-sc-1i7zmjv-0 QgnfO"><button style="position:absolute;right:0;border:none;cursor:pointer;margin:.5rem;background:transparent"><svg stroke="black" fill="black" stroke-width="0" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 30 30" height="1.3rem" width="1.3rem" xmlns="http://www.w3.org/2000/svg"><path d="M3.74,14.44c0-1.52,0.3-2.98,0.89-4.37s1.4-2.58,2.4-3.59s2.2-1.81,3.59-2.4s2.84-0.89,4.37-0.89s2.98,0.3,4.37,0.89 s2.59,1.4,3.6,2.4s1.81,2.2,2.4,3.59s0.89,2.84,0.89,4.37s-0.3,2.98-0.89,4.37s-1.4,2.59-2.4,3.6s-2.2,1.81-3.6,2.4 s-2.85,0.89-4.37,0.89s-2.98-0.3-4.37-0.89s-2.58-1.4-3.59-2.4s-1.81-2.2-2.4-3.6S3.74,15.97,3.74,14.44z M4.94,14.44 c0,1.37,0.27,2.67,0.8,3.91s1.25,2.31,2.15,3.21s1.97,1.61,3.21,2.15s2.54,0.8,3.9,0.8h0.21V4.39h-0.21c-1.36,0-2.66,0.27-3.9,0.8 S8.79,6.44,7.89,7.34s-1.61,1.97-2.15,3.21S4.94,13.09,4.94,14.44z"></path></svg></button><div itemscope="" itemType="https://schema.org/SoftwareSourceCode"><div itemProp="audience" itemscope="" itemtype="https://schema.org/Audience"><meta itemProp="audienceType" content="programmers"/></div><meta itemProp="codeSampleType" content="code snippet"/><meta itemProp="codeRepository" content="https://github.com/rilexus/advanced-react-pattern"/><div itemProp="maintainer" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><div itemProp="author" itemscope="" itemType="https://schema.org/Person"><meta itemProp="image" content="https://avatars.githubusercontent.com/u/28537457?v=4"/><meta itemProp="sameAs" content="https://github.com/rilexus"/><meta itemProp="name" content="Stanislav Panchenko"/></div><meta itemProp="programmingLanguage" content="javascript"/><pre class="Code__StyledPre-sc-1i7zmjv-1 fwqmoU">const useToggle = (
  initial = false,
  reducer = toggleReducer /* can be overwritten */
) =&gt; {
  const [on, dispatch] = useReducer(reducer, initial);

  const toggle = () =&gt; dispatch({ type: &quot;toggle&quot; });
  const reset = () =&gt; dispatch({ type: &quot;reset&quot; });

  return { on, toggle, reset };
};</pre></div></div></div></article></main></div></div><div style="transform:translate(0px);box-shadow:0 0px 6px -1px rgb(0 0 0/0.1),
            0 0px 4px -2px rgb(0 0 0/0.1)" class="Layout__StyledSidebar-sc-1tqca63-0 gpnAYg"><button style="width:3rem;height:3rem;border-radius:3rem;border:1px solid #d8d8d8;display:flex;align-items:center;justify-content:center;cursor:pointer;position:absolute;top:20px;right:-1rem;transition:transform 200ms;transform:rotate(0deg)"><svg stroke="currentColor" fill="currentColor" height="1rem" width="1rem" stroke-width="0" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"></path></svg></button><nav><ul style="padding-left:1rem"><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Home</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><h4>Utils</h4><ul style="padding-left:1rem"><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Prefetched State</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">State Subscription</a></li></ul></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><h4>Components</h4><ul style="padding-left:1rem"><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Suspense</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Compound Components</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">State Reducer</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Props Collection</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Render Props</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Factory</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Control Props</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Decorator</a></li></ul></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><h4>Hooks</h4><ul style="padding-left:1rem"><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Reducer Hook</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Undo State</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Thunk Reducer</a></li><li class="Li__Styled-sc-2pbekf-0 fnJOng"><a class="Link__StyledLink-sc-wozd19-0 hWeMkM">Fetch Hook</a></li></ul></li></ul></nav></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/StateReducer","query":{},"buildId":"C8ktgNYOo0vRgkcGtOktL","assetPrefix":"/advanced-react-pattern","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>